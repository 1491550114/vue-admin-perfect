import{g as H,i as d,B as ae,j as L,r as t,C as te,o as s,c as x,a as E,b as u,w as l,F as j,D as J,G as K,n as h,q as Q,H as ne,d as f,s as W,I as oe,t as G,J as X,_ as ee,x as se,K as re,L as ie,M as C,N as Z}from"./index.bd00656a.js";const ce={class:"zb-pro-table"},de={class:"header"},pe={class:"search"},_e={class:"footer"},me={class:"operator"},fe={class:"table"},ve={key:0},ge={class:"pagination"},be=H({__name:"index",props:{columns:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["reset","onSubmit","selection-change"],setup(w,{emit:_}){const T=w,k=d(),B=d(1),r=d(!1),N=o=>{console.log(`${o} items per page`)},A=o=>{console.log(`current page: ${o}`),B.value=o},p=ae(()=>JSON.parse(JSON.stringify(T.data)).splice((B.value-1)*10,10));d(!1);let $={},b=[];for(let o of T.columns)o.inSearch&&($[o.name]=null),o.inSearch&&b.push(o);const D=d(b),v=L($),z=()=>{console.log("submit!",v),_("onSubmit",v)},M=o=>{D.value.forEach(m=>{v[m.name]=null}),_("reset")};return(o,m)=>{const O=t("el-input"),P=t("el-option"),R=t("el-select"),q=t("el-form-item"),I=t("el-form"),a=t("el-button"),n=t("arrow-down"),V=t("arrow-up"),g=t("el-icon"),i=t("el-table-column"),Y=t("el-table"),U=t("el-pagination"),S=te("loading");return s(),x("div",ce,[E("div",de,[u(I,{inline:!0,class:"search-form",model:v,ref_key:"ruleFormRef",ref:k},{default:l(()=>[(s(!0),x(j,null,J(D.value,(e,F)=>K((s(),h(q,{key:F,label:e.label},{default:l(()=>[e.valueType==="input"?(s(),h(O,{key:0,modelValue:v[e.name],"onUpdate:modelValue":y=>v[e.name]=y,placeholder:`\u8BF7\u8F93\u5165${e.label}`},null,8,["modelValue","onUpdate:modelValue","placeholder"])):Q("",!0),e.valueType==="select"?(s(),h(R,{key:1,style:{width:"100%"},modelValue:v[e.name],"onUpdate:modelValue":y=>v[e.name]=y,placeholder:`\u8BF7\u9009\u62E9${e.label}`},{default:l(()=>[(s(!0),x(j,null,J(e.options,y=>(s(),h(P,{key:y.value,label:y.label,value:y.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):Q("",!0)]),_:2},1032,["label"])),[[ne,r.value?r.value:F<2]])),128))]),_:1},8,["model"]),E("div",pe,[u(a,{type:"primary",onClick:z,icon:W(oe)},{default:l(()=>[f("\u67E5\u8BE2")]),_:1},8,["icon"]),u(a,{onClick:m[0]||(m[0]=e=>M(k.value))},{default:l(()=>[f("\u91CD\u7F6E")]),_:1}),u(a,{link:"",type:"primary",onClick:m[1]||(m[1]=e=>r.value=!r.value)},{default:l(()=>[f(G(r.value?"\u5408\u5E76":"\u5C55\u5F00"),1),u(g,null,{default:l(()=>[r.value?(s(),h(V,{key:1})):(s(),h(n,{key:0}))]),_:1})]),_:1})])]),E("div",_e,[E("div",me,[X(o.$slots,"btn",{},void 0,!0)]),E("div",fe,[K((s(),h(Y,{class:"zb-table",onSelectionChange:m[2]||(m[2]=e=>_("selection-change",e)),data:W(p),border:!0},{default:l(()=>[(s(!0),x(j,null,J(w.columns,e=>(s(),x(j,null,[e.type?(s(),h(i,{key:0,type:e.type,width:e.width,align:e.align!=null?e.align:"center",fixed:e.fixed,label:e.label},null,8,["type","width","align","fixed","label"])):(s(),h(i,{key:1,prop:e.name,width:e.width,align:e.align!=null?e.align:"center",fixed:e.fixed,label:e.label},{default:l(F=>[e.slot?X(o.$slots,e.name,{key:1,item:e,row:F.row},void 0,!0):(s(),x("span",ve,G(F.row[e.name]),1))]),_:2},1032,["prop","width","align","fixed","label"]))],64))),256))]),_:3},8,["data"])),[[S,w.loading]])]),E("div",ge,[u(U,{currentPage:B.value,"onUpdate:currentPage":m[3]||(m[3]=e=>B.value=e),"page-size":10,background:"",layout:"total, sizes, prev, pager, next, jumper",total:w.data.length,onSizeChange:N,onCurrentChange:A},null,8,["currentPage","total"])])])])}}});const ye=ee(be,[["__scopeId","data-v-9e323fdc"]]),he={style:{display:"flex","justify-content":"flex-end"}},Ee={class:"dialog-footer"},De=H({name:"comprehensive"}),Fe=H({...De,setup(w){const _=d(!0),T=d(null),k=[];for(let a=0;a<100;a++)k.push({date:"2016-05-02",name:"\u738B\u4E94"+a,price:1+a,province:"\u4E0A\u6D77",admin:"admin",sex:a%2?1:0,checked:!0,id:a+1,age:0,city:"\u666E\u9640\u533A",address:"\u4E0A\u6D77\u5E02\u666E\u4E0A\u6D77",zip:200333});const B=[{type:"selection",width:60,fixed:"left"},{name:"name",label:"\u59D3\u540D",inSearch:!0,valueType:"input",width:80},{name:"age",label:"\u5E74\u9F84",align:"right"},{name:"sex",label:"\u6027\u522B",slot:!0,inSearch:!0,options:[{value:1,label:"\u7537"},{value:0,label:"\u5973"}],valueType:"select"},{name:"price",label:"\u4EF7\u683C",inSearch:!0,valueType:"input"},{name:"admin",label:"\u8D26\u53F7",inSearch:!0,valueType:"input"},{name:"address",label:"\u5730\u5740",inSearch:!0,valueType:"input",width:180},{name:"date",label:"\u65E5\u671F",sorter:!0,inSearch:!0,valueType:"input",width:180},{name:"province",label:"\u7701\u4EFD",width:100},{name:"city",label:"\u57CE\u5E02"},{name:"zip",label:"\u90AE\u7F16"},{name:"operation",slot:!0,fixed:"right",width:200,label:"\u64CD\u4F5C"}],r=d(k),N=d("default"),A=d(),p=L({name:"",sex:null,price:null}),$=L({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u540D\u79F0\u6D3B\u52A8\u533A\u57DF",trigger:"blur"},{min:3,max:5,message:"\u957F\u5EA6\u5728 3 \u5230 5 \u4E2A\u5B57\u7B26",trigger:"blur"}],price:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EF7\u683C",trigger:"blur"}],sex:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B",trigger:"change"}]}),b=d(!1),D=d("\u65B0\u589E"),v=d({}),z=d([]),M=async a=>{await A.value.validate((n,V)=>{if(n){let g={id:Date.now(),...p,age:0,city:"\u666E\u9640\u533A",address:"\u4E0A\u6D77\u5E02\u666E\u4E0A\u6D77",zip:200333,province:"\u4E0A\u6D77",admin:"admin",date:ie().format("YYYY-MM-DD")};D.value==="\u65B0\u589E"?(r.value=[g,...r.value],C.success("\u6DFB\u52A0\u6210\u529F")):r.value.forEach(i=>{i.id===v.value.id&&(i.name=g.name,i.sex=g.sex,i.price=g.price)}),b.value=!1,console.log("submit!",g)}else console.log("error submit!",V)})},o=()=>{D.value="\u65B0\u589E",b.value=!0},m=()=>{if(!z.value.length)return C.error("\u672A\u9009\u4E2D\u4EFB\u4F55\u884C");Z.confirm("\u4F60\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u9879\u5417?","\u6E29\u99A8\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",draggable:!0}).then(()=>{C.success("\u6A21\u62DF\u5220\u9664\u6210\u529F"),r.value=r.value.concat([])}).catch(()=>{})},O=a=>{z.value=a},P=a=>{D.value="\u7F16\u8F91",v.value=a,b.value=!0,p.name=a.name,p.sex=a.sex,p.price=a.price},R=a=>{console.log("row==",a),Z.confirm("\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5F53\u524D\u9879\u5417?","\u6E29\u99A8\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",draggable:!0}).then(()=>{r.value=r.value.filter(n=>n.id!==a.id),C.success("\u5220\u9664\u6210\u529F"),_.value=!0,setTimeout(()=>{_.value=!1},500)}).catch(()=>{})},q=()=>{_.value=!0,setTimeout(()=>{_.value=!1},500),C.success("\u89E6\u53D1\u91CD\u7F6E\u65B9\u6CD5")},I=a=>{console.log("val===",a),C.success("\u89E6\u53D1\u67E5\u8BE2\u65B9\u6CD5"),_.value=!0,setTimeout(()=>{_.value=!1},500)};return se(()=>{re(()=>{}),setTimeout(()=>{_.value=!1},500)}),(a,n)=>{const V=t("plus"),g=t("el-icon"),i=t("el-button"),Y=t("delete"),U=t("el-input"),S=t("el-form-item"),e=t("el-radio"),F=t("el-radio-group"),y=t("el-form"),le=t("el-dialog");return s(),x("div",{class:"app-container",ref_key:"appContainer",ref:T},[u(ye,{loading:_.value,onSelectionChange:O,columns:B,data:r.value,onReset:q,onOnSubmit:I},{btn:l(()=>[E("div",he,[u(i,{type:"primary",onClick:o},{default:l(()=>[u(g,null,{default:l(()=>[u(V)]),_:1}),f(" \u6DFB\u52A0")]),_:1}),u(i,{type:"danger",onClick:m},{default:l(()=>[u(g,null,{default:l(()=>[u(Y)]),_:1}),f("\u5220\u9664")]),_:1})])]),sex:l(c=>[f(G(c.row.sex?"\u7537":"\u5973"),1)]),operation:l(c=>[u(i,{type:"primary",size:"small",icon:"Edit",onClick:ue=>P(c.row)},{default:l(()=>[f(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),u(i,{onClick:ue=>R(c.row),type:"danger",size:"small",icon:"Delete"},{default:l(()=>[f(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1},8,["loading","data"]),u(le,{modelValue:b.value,"onUpdate:modelValue":n[5]||(n[5]=c=>b.value=c),title:D.value,width:"50%"},{footer:l(()=>[E("span",Ee,[u(i,{onClick:n[3]||(n[3]=c=>b.value=!1)},{default:l(()=>[f("\u53D6\u6D88")]),_:1}),u(i,{type:"primary",onClick:n[4]||(n[4]=c=>M(A.value))},{default:l(()=>[f("\u786E\u5B9A")]),_:1})])]),default:l(()=>[u(y,{ref_key:"ruleFormRef",ref:A,model:p,rules:$,"label-width":"120px",class:"demo-ruleForm",size:N.value},{default:l(()=>[u(S,{label:"\u6D3B\u52A8\u540D\u79F0",prop:"name"},{default:l(()=>[u(U,{modelValue:p.name,"onUpdate:modelValue":n[0]||(n[0]=c=>p.name=c)},null,8,["modelValue"])]),_:1}),u(S,{label:"\u6027\u522B",prop:"sex"},{default:l(()=>[u(F,{modelValue:p.sex,"onUpdate:modelValue":n[1]||(n[1]=c=>p.sex=c)},{default:l(()=>[u(e,{label:1},{default:l(()=>[f("\u7537")]),_:1}),u(e,{label:0},{default:l(()=>[f("\u5973")]),_:1})]),_:1},8,["modelValue"])]),_:1}),u(S,{label:"\u4EF7\u683C",prop:"price"},{default:l(()=>[u(U,{modelValue:p.price,"onUpdate:modelValue":n[2]||(n[2]=c=>p.price=c)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules","size"])]),_:1},8,["modelValue","title"])],512)}}});const Be=ee(Fe,[["__scopeId","data-v-41a59f8c"]]);export{Be as default};
